#include <iostream>
#include <fstream> // acesso a biblioteca com as funções que permitem o uso dos arquivos
#include <locale.h> // permitir a acentuação
#include <cstring>

using namespace std;

struct Img{
    int linhas;
    int colunas;
    int M[512][512][3];
};

void abre_img(char nome[], Img& img){
    fstream arq;
    ofstream myfile;
    myfile.open("aaa.ppm");

    int linhas, colunas, tam, pixels, k=0;
    char tipo[2]; // declara uma variavel char para armazenar o tipo da imagem

    arq.open(nome);

    if(arq.is_open()){
        cout << "Está aberto!\n";
        arq.getline(tipo, 3);
        myfile << tipo << "\n";

        arq >> colunas;
        arq.ignore();
        arq >> linhas;
        arq.ignore();
        arq>> pixels;
        arq.ignore();

        myfile << colunas << " " << linhas << "\n" << pixels << endl;
        int i;
        int j;
        int c = 0;

        for(i=0; i<linhas; i++){
            for(j=0; j<colunas; j++){
               for(k=0; k<3; k++){
                    c++;
                    arq >> img.M[i][j][k];
                    myfile << img.M[i][j][k] << " ";
                    k++;
               }
            }
            //myfile << endl;
        }
        cout<<"Caminho total: "<<i<<"  "<<j<< " " << c << endl;
        arq.close();
        myfile.close();
    }

    else{
        cout << "Não está aberto!\n";
    }
}

int main()
{
    setlocale(LC_ALL, "Portuguese"); // permite a utilização de acentos provenientes da lingua portuguesa
    Img img;

    char nome[]="ect_logo.ppm";
    //cout << "Informe o nome do arquivo que vc deseja abrir: " << endl;

    abre_img(nome, img);

    return 0;
}
